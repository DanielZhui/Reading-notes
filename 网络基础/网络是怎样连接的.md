# 网络是怎样连接的

## 浏览器生成的消息 —— 探索浏览器内部

### 生产 HTTP 请求消息

### 向 DNS 服务器查询 Web 服务器的 IP 地址

#### IP 地址的基础知识

​    生成 HTTP 消息之后，接下来我们需要委托操作系统将消息发送给 Web 服务器【浏览器能够解析网址并生成 HTTP 消息，但它本身不具备发到网络的功能】，在进行这一操作时，我们还有一个工作需要完成，就是查询网址中服务器域名对应的 IP 地址。在委托操作系统发送消息时，必须要提供请求服务器的 IP 地址。因此下一个步骤是根据域名查询 IP 地址。

​	互联网和公司内部的局域网都是基于 TCP/IP 的思路来设计的，所以我们需要先了解 TCP/IP 的基本思路，如下图所示。

​	在网络中，所有的设备都会被分配一个地址。这个地址就相当于现实中某条路上的 xx号xx室。其中 号 对应的号码是分配给整个子网的，而 室 对应的号码是分配给子网中的计算机的，这就是网络中的地址。号 对应的号码称为网络号，室 对应的号码称为主机号，这个地址整体称为 IP 地址。通过 IP 地址我们可以判断出访问对象服务器的位置，从而将消息发送到服务器。

![image-20220308220121337](http://static.wollens.top/image-20220308220121337.png)

实际 IP 地址是一串 32 比特的数字，按照 8 比特（1个字节）为一组分成四组，分别用十进制表示然后再用圆点隔开。这就是我们平时常见的 IP 地址格式，但是仅凭一串数字我们无法区分那部分是网络号，那部分是主机号。在 IP 地址的规则中，网络号和主机号连起来共识 32 比特，蛋这两部分的具体结构是不固定的。在组建网络是，用户可以自行决定它们之间的分配关系，因此我们还需要另外的附加信息来表示 IP 地址的内部结构

<img src="http://static.wollens.top/image-20220308221224656.png" alt="image-20220308221224656" style="zoom:50%;" />

子网掩码的格式如下图所示，是一串与 IP 地址长度相同的 32 比特数字，其左边一半都是1，右边一半都是0。其中子网掩码为 1 的部分表示网络号，子网掩码为 0 的部分表示主机号。

<img src="http://static.wollens.top/image-20220308222308302.png" alt="image-20220308222308302" style="zoom:50%;" />

> 备注：主机号部分的比特全部为 0 或者全部为 1 时代表两种特许的含义。主机号部分全部为 0 代表整个子网而不是子网中的某台设备。主机号全部为1代表向子网上所有的设备发送包，即广播

